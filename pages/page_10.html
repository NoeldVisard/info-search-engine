<!DOCTYPE html>

<html data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D" lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1.0,viewport-fit=cover,maximum-scale=1,user-scalable=0" name="viewport"/>
<meta content="unsafe-url" name="referrer"/>
<title>Microk8s, еще один легковесный K8s / Хабр</title>







<meta content="2.165.0" name="habr-version"/>
<meta content="444736788986613" data-vue-meta="ssr" property="fb:app_id"/><meta content="472597926099084" data-vue-meta="ssr" property="fb:pages"/><meta content="summary_large_image" data-vue-meta="ssr" name="twitter:card"/><meta content="@habr_com" data-vue-meta="ssr" name="twitter:site"/><meta content="Хабр" data-vmid="og:site_name" data-vue-meta="ssr" property="og:site_name"/><meta content="Microk8s, еще один легковесный K8s" data-vmid="og:title" data-vue-meta="ssr" property="og:title"/><meta content="Microk8s, еще один легковесный K8s" data-vmid="twitter:title" data-vue-meta="ssr" name="twitter:title"/><meta content="Microk8s, еще один легковесный K8s" data-vmid="aiturec:title" data-vue-meta="ssr" name="aiturec:title"/><meta content="Автор статьи: Рустем Галиев IBM Senior DevOps Engineer &amp;amp; Integration Architect. Официальный DevOps ментор и коуч в IBM В современном мире разработки и развертывания приложений, контейнеризация..." data-vmid="description" data-vue-meta="ssr" name="description"/><meta content="Автор статьи: Рустем Галиев IBM Senior DevOps Engineer &amp;amp; Integration Architect. Официальный DevOps ментор и коуч в IBM В современном мире разработки и развертывания приложений, контейнеризация..." data-vmid="description:itemprop" data-vue-meta="ssr" itemprop="description"/><meta content="Автор статьи: Рустем Галиев IBM Senior DevOps Engineer &amp;amp; Integration Architect. Официальный DevOps ментор и коуч в IBM В современном мире разработки и развертывания приложений, контейнеризация..." data-vmid="og:description" data-vue-meta="ssr" property="og:description"/><meta content="Автор статьи: Рустем Галиев IBM Senior DevOps Engineer &amp;amp; Integration Architect. Официальный DevOps ментор и коуч в IBM В современном мире разработки и развертывания приложений, контейнеризация..." data-vmid="twitter:description" data-vue-meta="ssr" name="twitter:description"/><meta content="Автор статьи: Рустем Галиев IBM Senior DevOps Engineer &amp;amp; Integration Architect. Официальный DevOps ментор и коуч в IBM В современном мире разработки и развертывания приложений, контейнеризация..." data-vmid="aiturec:description" data-vue-meta="ssr" property="aiturec:description"/><meta content="https://habrastorage.org/getpro/habr/upload_files/b20/434/1de/b204341de3f74251a502392dc1cca201.jpg" data-vmid="image:itemprop" data-vue-meta="ssr" itemprop="image"/><meta content="https://habrastorage.org/getpro/habr/upload_files/b20/434/1de/b204341de3f74251a502392dc1cca201.jpg" data-vmid="og:image" data-vue-meta="ssr" property="og:image"/><meta content="1200" data-vmid="og:image:width" data-vue-meta="ssr" property="og:image:width"/><meta content="630" data-vmid="og:image:height" data-vue-meta="ssr" property="og:image:height"/><meta content="https://habrastorage.org/getpro/habr/upload_files/b20/434/1de/b204341de3f74251a502392dc1cca201.jpg" data-vmid="aiturec:image" data-vue-meta="ssr" property="aiturec:image"/><meta content="https://habrastorage.org/getpro/habr/upload_files/b20/434/1de/b204341de3f74251a502392dc1cca201.jpg" data-vmid="twitter:image" data-vue-meta="ssr" name="twitter:image"/><meta content="https://habrastorage.org/getpro/habr/upload_files/b20/434/1de/b204341de3f74251a502392dc1cca201.jpg?format=vk" data-vmid="vk:image" data-vue-meta="ssr" property="vk:image"/><meta content="794398" data-vmid="aiturec:item_id" data-vue-meta="ssr" property="aiturec:item_id"/><meta content="2024-02-17T13:37:44.000Z" data-vmid="aiturec:datetime" data-vue-meta="ssr" property="aiturec:datetime"/><meta content="https://habr.com/ru/companies/otus/articles/794398/" data-vmid="og:url" data-vue-meta="ssr" property="og:url"/><meta content="article" data-vmid="og:type" data-vue-meta="ssr" property="og:type"/><meta content="ru_RU" data-vmid="og:locale" data-vue-meta="ssr" property="og:locale"/><meta content="microk8s, kubernetes, k8" data-vue-meta="ssr" name="keywords"/>

<meta content="#303b44" name="apple-mobile-web-app-status-bar-style"/>
<meta content="#629FBC" name="msapplication-TileColor"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="yes" name="mobile-web-app-capable"/>
































</head>
<body>
<div data-async-called="true" data-server-rendered="true" id="app"><div class="tm-layout__wrapper"><!-- --> <div></div> <div class="tm-feature tm-feature"><!-- --></div> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><div class="tm-header__burger-nav"><button class="tm-header__button tm-header__button_burger" type="button"><svg class="tm-svg-img tm-header__icon tm-header__icon-burger" height="16" width="16"><title>Меню</title> <use xlink:href="/img/megazord-v28.faec9762..svg#header-burger"></use></svg></button></div> <span class="tm-header__logo-wrap"><a class="tm-header__logo tm-header__logo tm-header__logo_hl-ru" href="/ru/"><svg class="tm-svg-img tm-header__icon" height="16" width="16"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <!-- --> <div class="tm-header-user-menu tm-header_user-menu"><a class="tm-header-user-menu__item tm-header-user-menu__search" href="/ru/search/"><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search" height="24" width="24"><title>Поиск</title> <use xlink:href="/img/megazord-v28.faec9762..svg#search"></use></svg></a> <!-- --> <!-- --> <!-- --> <div class="tm-header-user-menu__item"><button class="tm-header-user-menu__toggle"><svg class="tm-svg-img tm-header-user-menu__icon" height="24" width="24"><title>Настройки</title> <use xlink:href="/img/megazord-v28.faec9762..svg#page-settings"></use></svg></button></div> <a class="tm-header-user-menu__item" href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/companies/otus/articles/794398/&amp;hl=ru" rel="nofollow"><button class="tm-header-user-menu__login btn btn_solid btn_small" type="button">
        Войти
      </button></a> <!-- --> <div class="v-portal" style="display:none;"></div></div></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <!-- --> <!-- --> <div class="tm-page-width"></div> <main class="tm-layout__container"><div class="tm-page" companyname="otus" data-async-called="true" hl="ru"><div class="tm-page-width"><!-- --> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><!-- --> <div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg class="tm-svg-img pull-down__icon pull-down__arrow" height="24" width="24"><title>Обновить</title> <use xlink:href="/img/megazord-v28.faec9762..svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><!-- --> <!-- --> <!-- --> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet tm-article-snippet"> <div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a class="tm-user-info__userpic" href="/ru/users/MaxRokatansky/" title="MaxRokatansky"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="32" src="//habrastorage.org/r/w64/getpro/habr/avatars/b9f/baf/5f9/b9fbaf5f96ae52973706a0716bd9216e.jpg" width="32"/></div></a> <span class="tm-user-info__user tm-user-info__user_appearance-default"><a class="tm-user-info__username" href="/ru/users/MaxRokatansky/">
      MaxRokatansky
      <!-- --></a> <span class="tm-article-datetime-published"><time datetime="2024-02-17T13:37:44.000Z" title="2024-02-17, 16:37">6 часов назад</time></span></span></span></div> <!-- --></div> <h1 class="tm-title tm-title_h1" lang="ru"><span>Microk8s, еще один легковесный K8s</span></h1> <div class="tm-article-snippet__stats"><div class="tm-article-complexity tm-article-complexity_complexity-low"><span class="tm-svg-icon__wrapper tm-article-complexity__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Уровень сложности</title> <use xlink:href="/img/megazord-v28.faec9762..svg#complexity-low"></use></svg></span> <span class="tm-article-complexity__label">
    Простой
  </span></div> <div class="tm-article-reading-time"><span class="tm-svg-icon__wrapper tm-article-reading-time__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Время на прочтение</title> <use xlink:href="/img/megazord-v28.faec9762..svg#clock"></use></svg></span> <span class="tm-article-reading-time__label">
    6 мин
  </span></div> <span class="tm-icon-counter tm-data-icons__item"><svg class="tm-svg-img tm-icon-counter__icon" height="24" width="24"><title>Количество просмотров</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-views"></use></svg> <span class="tm-icon-counter__value">1.6K</span></span></div> <div class="tm-publication-hubs__container"><div class="tm-publication-hubs"><span class="tm-publication-hub__link-container"><a class="router-link-active tm-publication-hub__link" href="/ru/companies/otus/articles/"><span>Блог компании OTUS</span> <!-- --></a></span><span class="tm-publication-hub__link-container"><a class="tm-publication-hub__link" href="/ru/hubs/kubernetes/"><span>Kubernetes</span> <span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span></a></span></div></div> <div class="tm-article-labels"><div class="tm-article-labels__container"><div class="tm-publication-label tm-publication-label_variant-review"><span>
    Обзор
  </span></div> </div></div> <!-- --> <!-- --></div></div> <!-- --> <div class="tm-article-body" data-gallery-root="" lang="ru"><div></div> <div id="post-content-body"><div><div class="article-formatted-body article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><div class="persona"><img class="image persona__image" data-blurred="true" data-src="https://habrastorage.org/getpro/habr/upload_files/0f2/ada/bbc/0f2adabbc4fac5669993b0bf6ef605d8.jpg" src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/0f2/ada/bbc/0f2adabbc4fac5669993b0bf6ef605d8.jpg"><h5 class="persona__heading">Автор статьи: Рустем Галиев</h5><p>IBM Senior DevOps Engineer &amp; Integration Architect. Официальный DevOps ментор и коуч в IBM  </p></img></div><p>В современном мире разработки и развертывания приложений, контейнеризация стала ключевым элементом для обеспечения масштабируемости, гибкости и надежности. В этом контексте технология Kubernetes, как ведущая платформа оркестрации контейнеров, становится неотъемлемым инструментом для управления и развертывания многокомпонентных приложений.</p><p>Microk8s предоставляет собой легковесное решение для установки и управления Kubernetes-кластером на локальной машине или в облаке, делая процесс эксплуатации контейнеризированных приложений доступным для широкого круга разработчиков и системных администраторов. В этой статье мы рассмотрим основные шаги быстрого старта с Microk8s, от установки до первого развертывания приложения, чтобы обеспечить эффективное использование Kubernetes в ваших проектах.</p><p>MicroK8s - отличный способ запустить и ознакомиться с Kubernetes. Это полностью совместимый, легковесный пакет Kubernetes, который работает на 42 видах Linux и идеально подходит для:</p><ul><li><p>Рабочих станций разработчиков.</p></li><li><p>Интернета вещей (IoT).</p></li><li><p>Edge-вычислений.</p></li><li><p>Быстрого тестирования, экспериментирования и обучения.</p></li></ul><p><strong>Почему MicroK8s? Потому что:</strong></p><ul><li><p><em>Компактный</em>. Разработчики хотят наименьший экземпляр Kubernetes для разработки на ноутбуках и рабочих станциях. MicroK8s предоставляет автономный экземпляр Kubernetes, совместимый с Azure Kubernetes Service, Amazon Elastic Kubernetes Service и Google Kubernetes Engine при запуске на Ubuntu.</p></li><li><p><em>Простой</em>. Минимизация администрирования и операций с помощью установки единственного пакета без подвижных частей для обеспечения простоты и надежности. Все зависимости и необходимые компоненты включены.</p></li><li><p><em>Безопасны.</em> Обновления доступны для всех проблем безопасности и могут быть применены немедленно или запланированы в соответствии с вашим циклом обслуживания.</p></li><li><p><em>Актуальный</em>. MicroK8s отслеживает upstream и выпускает бета-версии, кандидаты в релиз и финальные версии в тот же день, что и upstream Kubernetes. Вы можете следить за последней версией Kubernetes или придерживаться любой версии релиза с 1.10 и выше.</p></li><li><p><em>Комплексный</em>. MicroK8s включает в себя отобранный набор манифестов для общих возможностей и служб Kubernetes (например, meshes, observability, ingress, auto updates и привязки GPGPU).</p></li></ul><p>Сегодня я расскажу, как:</p><ul><li><p>Установить MicroK8s на Linux.</p></li><li><p>Использовать MicroK8s так же, как и другие кластеры Kubernetes.</p></li><li><p>Получить доступ к панели управления Kubernetes.</p></li><li><p>Добавить рабочие узлы в кластер MicroK8s.</p></li></ul><p>Сперва определим версии кластера в переменных среды</p><pre><code class="yaml">MICROK8S_VERSION=1.24; KUBE_VERSION=1.24.0</code></pre><p>Установим</p><pre><code class="yaml">snap install microk8s --classic --channel=$MICROK8S_VERSION/stable</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/02a/301/0c3/02a3010c3b72bc16db6796132feb259d.png" height="66" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/02a/301/0c3/02a3010c3b72bc16db6796132feb259d.png" width="917"/></figure><p>Проверим работает ли все</p><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/437/144/d10/437144d10539a1e67b0095374da0ba1e.png" height="611" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/437/144/d10/437144d10539a1e67b0095374da0ba1e.png" width="900"/></figure><p>Команда <code>snap install</code> не только устанавливает инструмент командной строки, но также запускает Kubernetes на нашу машину. Проверим его статус:</p><pre><code class="yaml">microk8s status --wait-ready | grep -z "microk8s is running"</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/186/820/410/186820410965cb71222bc782581d4d91.png" height="577" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/186/820/410/186820410965cb71222bc782581d4d91.png" width="1037"/></figure><p>После возврата статуса, у нас запущен одноузловой кластер Kubernetes. Давайте проверим версию Kubernetes:</p><pre><code class="yaml">microk8s kubectl version --output=yaml</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/3e9/5d7/f1a/3e95d7f1ad67401af721b7563355f7f1.png" height="514" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/3e9/5d7/f1a/3e95d7f1ad67401af721b7563355f7f1.png" width="871"/></figure><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/b8e/847/5fd/b8e8475fda70d8270350c3ce7f631932.png" height="80" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/b8e/847/5fd/b8e8475fda70d8270350c3ce7f631932.png" width="813"/></figure><p>Вы заметите, что команда <code>microk8s</code> привязывается к команде <code>kubectl</code>. Это сделано для того, чтобы убедиться, что контекст кластера <code>microk8s</code> передается в <code>kubectl</code>. Иногда удобнее создать alias:</p><pre><code class="yaml">alias mk='microk8s kubectl'</code></pre><p>На данном этапе это просто обычный Kubernetes, поэтому вам нужны только kubectl, и, возможно, позже, helm. Поэтому лучше иметь готовый инструмент kubectl с установленным правильным контекстом. Загрузим соответствующую версию kubectl:</p><pre><code class="yaml">curl -LO https://dl.k8s.io/release/v${KUBE_VERSION}/bin/linux/amd64/kubectl</code></pre><p>Установим</p><pre><code class="yaml">install -o root -g root -m 0755 kubectl /usr/bin/kubectl</code></pre><p>Мы установим контекст <code>kubectl</code> в контекст <code>microk8s</code>:</p><pre><code class="yaml">microk8s config &gt; $HOME/.kube/config</code></pre><p>Проверочка</p><pre><code class="yaml">kubectl version &amp;&amp; kubectl get nodes,namespaces</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/7dd/3f3/45a/7dd3f345a8ca6eaefc847572d69aa3c1.png" height="575" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/7dd/3f3/45a/7dd3f345a8ca6eaefc847572d69aa3c1.png" width="1234"/></figure><p>Автозавершение командной строки (также называемое завершением по вкладке или автозаполнением) - это распространенная функция интерпретаторов командной строки, при которой программа автоматически дополняет частично введенные команды. Некоторые люди испытывают затруднения с командной строкой и ее инструментами из-за множества команд, параметров и правил синтаксиса, которые нужно помнить. С функцией автозавершения, нескольких начальных букв команды или параметра часто достаточно для того, чтобы автозаполнение поняло, что вы имеете в виду, и завершило оставшуюся часть после быстрого запроса клавиши Tab.</p><p><code>kubectl</code> используется настолько часто, что он становится громоздким, когда просто <code>k</code> было бы достаточно</p><pre><code class="bash">echo 'alias k=kubectl' &gt;&gt;~/.bashrc
echo 'source &lt;(kubectl completion bash)' &gt;&gt;~/.bashrc
echo 'complete -F __start_kubectl k' &gt;&gt;~/.bashrc
source ~/.bashrc</code></pre><p>Все вышеописанное делает работу с командной строкой более продуктивной:</p><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/f95/a78/1de/f95a781deffc8912619e5d53402ecd8f.png" height="91" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/f95/a78/1de/f95a781deffc8912619e5d53402ecd8f.png" width="1239"/></figure><p>MicroK8s - одна из многих форм Kubernetes. Первичная установка представляет собой однокузловой кластер. Это часто подходит для быстрой разработки, экспериментирования, валидации и обучения. Получим общую информацию о статусе кластера:</p><pre><code class="yaml">{ clear &amp;&amp; \
  echo -e "\n=== Kubernetes Status ===\n" &amp;&amp; \
  kubectl get --raw '/healthz?verbose' &amp;&amp; \
  kubectl version --short &amp;&amp; \
  kubectl get nodes &amp;&amp; \
  kubectl cluster-info; 
} | grep -z 'Ready\| ok\|passed\|running'</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/ce1/fa5/a13/ce1fa5a13a5f0e36921f3f95b1a63060.png" height="728" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/ce1/fa5/a13/ce1fa5a13a5f0e36921f3f95b1a63060.png" width="998"/></figure><p>Проверим <code>healtz</code> эндпоинты <code>controlplane</code></p><pre><code class="yaml">kubectl get --raw '/healthz?verbose' | grep ' ok'</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/95f/5c8/2f6/95f5c82f682835009d017a5f4cf75838.png" height="623" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/95f/5c8/2f6/95f5c82f682835009d017a5f4cf75838.png" width="974"/></figure><p>На первый взгляд MicroK8s выглядит и ведет себя как другие кластеры Kubernetes. Сервер API Kubernetes (kube-apiserver) готов принимать наши команды:</p><pre><code class="yaml">kubectl get --raw /</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/3b1/ae1/24f/3b1ae124f4eaf490a895c7471b59038b.png" height="510" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/3b1/ae1/24f/3b1ae124f4eaf490a895c7471b59038b.png" width="1102"/></figure><p>Например, мы запрашиваем у API информацию о состоянии пространства имен по умолчанию:</p><pre><code class="yaml">kubectl get --raw /api/v1/namespaces/default | jq</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/933/dbf/6ef/933dbf6ef71a5d00950a8903c61b2f3f.png" height="677" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/933/dbf/6ef/933dbf6ef71a5d00950a8903c61b2f3f.png" width="1123"/></figure><p>Заглянем поглубже. Вы, вероятно, заметите, что MicroK8s выбрал некоторые альтернативные конфигурации для поддерживающих контроллеров controlplane Kubernetes. В отличие от других кластеров, вы увидите, что несколько <code>cp</code> работают в пространстве имен <code>kube-system</code>:</p><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/164/122/5fe/1641225fe61c4b94ce0ca7cccf7e319d.png" height="101" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/164/122/5fe/1641225fe61c4b94ce0ca7cccf7e319d.png" width="894"/></figure><p>На данном этапе перечислен только Calico, который является интерфейсом контейнера по умолчанию (CNI) в MicroK8s. Другие ключевые компоненты <code>cp</code>, такие как <code>etcd</code>, <code>CoreDNS</code>, <code>kube-apiserver</code>, <code>kube-proxy</code>, <code>kube-scheduler</code> и <code>kube-controller-manager</code>, отсутствуют, однако кластер сообщает, что он здоров. Что происходит? Где они?</p><p>Архитекторы MicroK8s добавили эти ключевые контролирующие компоненты Kubernetes в виде служб-демонов, управляемых <code>systemd</code>:</p><pre><code class="yaml">systemctl list-units 'snap.microk8s.*' --no-pager</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/7a0/245/278/7a0245278ae320f377d66cadccaab892.png" height="415" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/7a0/245/278/7a0245278ae320f377d66cadccaab892.png" width="1228"/></figure><p>Они заменили <code>etcd</code> другим хранилищем данных под названием <code>daemon-k8s-dqlite</code>, также разработанным Canonical. MicroK8s часто ориентирован на установки на ноутбуки, в edge-среды и IoT, где ресурсы могут быть ограничены по сравнению с виртуальными машинами облачных предприятий.<br/><br/>Давайте расширим наш кластер, добавим ноды.<br/><br/>На этом <code>cp</code> ноде мы просим MicroK8s создать строку подключения:</p><pre><code class="yaml">microk8s add-node</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/098/939/b35/098939b35d02c27a88ea7f10a0b2d2b9.png" height="226" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/098/939/b35/098939b35d02c27a88ea7f10a0b2d2b9.png" width="1197"/></figure><p>Заджойним ноду с нашей второй машинки.</p><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/e2f/891/d85/e2f891d85abb3b9ff4f89c53b93c0d37.png" height="95" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/e2f/891/d85/e2f891d85abb3b9ff4f89c53b93c0d37.png" width="993"/></figure><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/c8b/a6f/4a1/c8ba6f4a1e1dd018c697fcf9f8b34c7c.png" height="97" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/c8b/a6f/4a1/c8ba6f4a1e1dd018c697fcf9f8b34c7c.png" width="791"/></figure><p>Существует разнообразие предварительно настроенных служб, которые можно быстро добавить в MicroK8s. Иметь их под рукой удобно. Вот список дополнительных служб:</p><pre><code class="yaml">microk8s status</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/5a0/bd8/d3e/5a0bd8d3ecf1054e13e3dde7d36f7c02.png" height="572" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/5a0/bd8/d3e/5a0bd8d3ecf1054e13e3dde7d36f7c02.png" width="1071"/></figure><p>Для разработки и локального тестирования часто сначала мы захотим добавить эти четыре службы Kubernetes:</p><pre><code class="yaml">microk8s enable dashboard dns registry metrics-server</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/b93/c03/390/b93c03390ad31de3a619e3a73a41bba2.png" height="685" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/b93/c03/390/b93c03390ad31de3a619e3a73a41bba2.png" width="1217"/></figure><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/55f/ba6/576/55fba65762ea73a2d0ce582d4cbc5944.png" height="778" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/55f/ba6/576/55fba65762ea73a2d0ce582d4cbc5944.png" width="1123"/></figure><p>Эти дополнительные службы будут запущены в подах:</p><pre><code class="yaml">kubectl get pods --namespace kube-system</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/eb4/d3d/595/eb4d3d5959436b81b9e44b4779129665.png" height="167" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/eb4/d3d/595/eb4d3d5959436b81b9e44b4779129665.png" width="1036"/></figure><p>С учетом вышесказанного, дэшборд теперь доступен как сервис ClusterIP:</p><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/ffb/624/dbc/ffb624dbcd6cd44ea2cb12ff3802fb53.png" height="252" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/ffb/624/dbc/ffb624dbcd6cd44ea2cb12ff3802fb53.png" width="1199"/></figure><p>Давайте получим к нему доступ через <code>NodePort</code>, создадим манифест:</p><pre><code class="yaml">apiVersion: v1
kind: Service
metadata:
  labels:
    k8s-app: kubernetes-dashboard
  name: kubernetes-dashboard-np
  namespace: kube-system
spec:
  type: NodePort
  ports:
  - port: 443
    protocol: TCP
    targetPort: 8443
    nodePort: 30000
  selector:
    k8s-app: kubernetes-dashboard</code></pre><p>И задеплоим его:</p><pre><code class="yaml">kubectl apply -f dashboard-via-nodeport.yamlkubectl get services -A | grep -z "kubernetes-dashboard\|30000"</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/95f/197/327/95f1973271ed9ff5e542cebaf62823e3.png" height="84" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/95f/197/327/95f1973271ed9ff5e542cebaf62823e3.png" width="1228"/></figure><p>Теперь можно подключится к нашему дэшборду через ip нашей ноды по 30000 порту<br/><br/></p><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/3c3/3df/e2f/3c33dfe2fb8abb272148eb3ff01fa674.png" height="765" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/3c3/3df/e2f/3c33dfe2fb8abb272148eb3ff01fa674.png" width="1600"/></figure><p>Еще одним добавленным дополнением является metrics-server:</p><pre><code class="yaml">kubectl get services -A | grep -z "metrics-server"</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/2c7/c40/13c/2c7c4013cbf1fdf44b21b7ef09615138.png" height="220" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/2c7/c40/13c/2c7c4013cbf1fdf44b21b7ef09615138.png" width="1169"/></figure><p>При наличии этой службы мы можем получить доступ к некоторым данным метрик с использованием команды <code>top</code>:</p><pre><code class="xml">kubectl top nodes &amp;&amp; kubectl top pods -n kube-system</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/5c5/7b7/e2c/5c57b7e2ce62939f596643adfc6699e3.png" height="300" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/5c5/7b7/e2c/5c57b7e2ce62939f596643adfc6699e3.png" width="958"/></figure><p>Эти метрики также отображаются в дэшборде. Можно ознакомиться с нодами и подами, чтобы увидеть метрики.</p><p>Если вы беспокоитесь о ресурсах, используемых MicroK8s, выведите базовые значения потребления памяти компонентов, когда кластер находится в тихом состоянии:</p><pre><code class="yaml">top -o %MEM -b -n1 | head -n 19</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/dcf/fc0/279/dcffc027981b70c944bf09c84d7fb40f.png" height="465" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/dcf/fc0/279/dcffc027981b70c944bf09c84d7fb40f.png" width="1060"/></figure><p>Для продолжения демонстрации того, что MicroK8s также, как и другие ваши кластеры Kubernetes, давайте запустим стандартное приложение. Все здесь применимо к стандартному Kubernetes и не является уникальным для MicroK8s.</p><p>Создадим Deployment:</p><pre><code class="yaml">kubectl create deployment my-nginx --image=nginx</code></pre><p>И создадим к нему сервис вида Nodeport</p><pre><code class="yaml">kubectl expose deployment my-nginx --type=NodePort --port=80</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/7bc/a92/b75/7bca92b75c0960f0af38eff9d6aa740a.png" height="255" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/7bc/a92/b75/7bca92b75c0960f0af38eff9d6aa740a.png" width="1075"/></figure><p><br/>Узнаем значение NodePort, присвоенное сервису:</p><pre><code class="yaml">PORT=$(kubectl get service my-nginx  -o jsonpath="{.spec.ports[0].nodePort}") &amp;&amp; echo $PORT</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/29e/a32/816/29ea3281669975cd1a4e77f677a869ed.png" height="73" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/29e/a32/816/29ea3281669975cd1a4e77f677a869ed.png" width="1206"/></figure><p>Мы видим, что приложение NGINX реагирует ожидаемым образом:<br/></p><pre><code>curl http://host01:$PORT | grep -C1 "successfully"</code></pre><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/12c/ebc/b87/12cebcb876cf46ee4fdc0986b9a0336f.png" height="102" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/12c/ebc/b87/12cebcb876cf46ee4fdc0986b9a0336f.png" width="933"/></figure><p>Чтобы увидеть пример страницы NGINX в ее полном великолепии "hello-world", выведем службу на определенный <code>NodePort</code>, например, 32001:</p><pre><code class="yaml">apiVersion: v1
kind: Service
metadata:
  labels:
    app: my-nginx
  name: public-nginx
spec:
  ports:
  - nodePort: 32001
    port: 80
    protocol: TCP
    targetPort: 80
  selector:
    app: my-nginx
  type: NodePort</code></pre><p>И создадим</p><pre><code class="yaml">kubectl apply -f public-nginx.yaml</code></pre><p><br/>Переходим по ip ноды на 32001 порт и видим, что все работает:</p><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/0d0/065/c3a/0d0065c3a2f914876fe77c72913f05e7.png" height="277" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/0d0/065/c3a/0d0065c3a2f914876fe77c72913f05e7.png" width="767"/></figure><p>Теперь, если нам пока не нужно работать с k8s, мы можем поставить кластер на паузу<br/><br/><code>microk8s stop</code><br/><br/>И снова его запустить, когда надо через <code>microk8s start.</code><br/><br/></p><figure class=""><img data-src="https://habrastorage.org/getpro/habr/upload_files/f67/b0d/1de/f67b0d1de3175be3d4483c98ebe71c5b.png" height="97" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/f67/b0d/1de/f67b0d1de3175be3d4483c98ebe71c5b.png" width="400"/></figure><p>Как видите задеплоить и сконфигурировать легковесный Microk8s кластер достаточно несложно.</p><p><em>Статья подготовлена в преддверии старта курса </em><a href="https://otus.pw/CLfp/"><em>"Инфраструктурная платформа на основе Kubernetes".</em></a></p><p></p></div></div></div> <!-- --> <!-- --></div> <!-- --> <!-- --></div> <!-- --> <div class="tm-article-presenter__meta"><div class="tm-article-presenter__meta-list tm-separated-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bmicrok8s%5D">microk8s</a></li><li class="tm-separated-list__item"><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bkubernetes%5D">kubernetes</a></li><li class="tm-separated-list__item"><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bk8%5D">k8</a></li> <!-- --></ul></div> <div class="tm-article-presenter__meta-list tm-separated-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a class="tm-hubs-list__link router-link-active" href="/ru/companies/otus/articles/">Блог компании OTUS</a></li><li class="tm-separated-list__item"><a class="tm-hubs-list__link" href="/ru/hubs/kubernetes/">Kubernetes</a></li> <!-- --></ul></div></div> <!-- --></article></div> <!-- --></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-lever tm-article-rating__votes-switcher tm-votes-lever tm-votes-lever_appearance-article" title="Всего голосов 4: ↑3 и ↓1"><button class="tm-votes-lever__button" title="Нравится" type="button"><svg class="tm-svg-img tm-votes-lever__icon" height="24" width="24"><title>Голосование</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-vote"></use></svg></button> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-article"><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_positive">
          +2
        </span></span></div> <button class="tm-votes-lever__button" title="Не нравится" type="button"><svg class="tm-svg-img tm-votes-lever__icon tm-votes-lever__icon_arrow-down" height="24" width="24"><title>Голосование</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-vote"></use></svg></button></div> <div class="v-portal" style="display:none;"></div> <!-- --></div> <!-- --> <!-- --> <button class="bookmarks-button tm-data-icons__item" title="Добавить в закладки" type="button"><span class="tm-svg-icon__wrapper bookmarks-button__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-favorite"></use></svg></span> <span class="bookmarks-button__counter" title="Количество пользователей, добавивших публикацию в закладки">
    20
  </span></button> <div class="tm-sharing tm-data-icons__item" title="Поделиться"><button class="tm-sharing__button" type="button"><svg class="tm-sharing__icon" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z" fill="currentColor"></path></svg></button> <div class="v-portal" style="display:none;"></div></div> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a class="tm-article-comments-counter-link__link" href="/ru/companies/otus/articles/794398/comments/"><svg class="tm-svg-img tm-article-comments-counter-link__icon" height="24" width="24"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      1
    </span></a> <!-- --></div> <!-- --> <div class="v-portal" style="display:none;"></div></div></div></div> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!-- --> <section class="tm-block tm-block tm-block_spacing-bottom"><!-- --> <div class="tm-block__body tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a class="tm-company-snippet__logo-link" href="/ru/companies/otus/profile/"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="40" src="//habrastorage.org/getpro/habr/company/2d5/0ed/b57/2d50edb57cf45fa07cc4f39f53b78395.png" width="40"/></div></a> <div class="tm-company-snippet__info"><a class="tm-company-snippet__title" href="/ru/companies/otus/profile/">OTUS</a> <div class="tm-company-snippet__description">Цифровые навыки от ведущих экспертов</div></div></div> <div class="tm-article-author__buttons"><!-- --> <!-- --></div></div> <div class="tm-article-author__company-contacts"><a class="tm-article-author__contact" href="https://otus.ru" rel="noopener" target="_blank">
      Сайт
    </a><a class="tm-article-author__contact" href="https://vk.com/club145052891" rel="noopener" target="_blank">
      ВКонтакте
    </a><a class="tm-article-author__contact" href="https://telegram.me/Otusjava" rel="noopener" target="_blank">
      Telegram
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a class="tm-user-card__userpic tm-user-card__userpic_size-40" href="/ru/users/MaxRokatansky/"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" src="//habrastorage.org/getpro/habr/avatars/b9f/baf/5f9/b9fbaf5f96ae52973706a0716bd9216e.jpg"/></div></a> <div class="tm-user-card__meta"><div class="tm-counter-container tm-karma tm-karma" title=" 976 голосов "><div class="tm-counter-container__header"><div class="tm-karma__votes tm-karma__votes_positive">
      90
    </div></div> <div class="tm-counter-container__footer"><div class="tm-karma__text">
      Карма
    </div> <div class="v-portal" style="display:none;"></div></div></div> <div class="tm-counter-container" title="Рейтинг пользователя"><div class="tm-counter-container__header"> <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!-- --> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-rating"><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_rating">
          43.2
        </span></span></div> <!-- --></div></div> <div class="tm-counter-container__footer"><span class="tm-rating__text tm-rating__text">
      Рейтинг
    </span></div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name tm-user-card__name_variant-article">OTUS</span> <a class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article" href="/ru/users/MaxRokatansky/">
          @MaxRokatansky
        </a> <!-- --></div> <p class="tm-user-card__short-info tm-user-card__short-info tm-user-card__short-info_variant-article">Редактор</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons tm-user-card__buttons_variant-article"><!-- --> <!-- --> <!-- --> <!-- --></div></div> <!-- --></div></div> <!-- --></section> <!-- --> <!-- --> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments" id="publication-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style" href="/ru/companies/otus/articles/794398/comments/"><svg class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted" height="24" width="24"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 1 
    </span></a> <!-- --></div></div></div> <section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header tm-block__header_variant-borderless"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2> </div> <!-- --></header> <div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim"><div class="tm-tabs tm-tabs"><div><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim">
        Лучшие за сутки
      </button></span><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_slim">
        Похожие
      </button></span></div> <!-- --></div> <div class="similar-and-daily__tab-view"><div class="placeholder-wrapper"><!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <div class="tm-placeholder-article-cards"><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div></div> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --></div> <!-- --></div></div> <!-- --></section> <div class="placeholder-wrapper"><!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <div class="tm-placeholder-inset tm-placeholder-vacancies"><div class="tm-placeholder-inset__header"><div class="tm-placeholder__line tm-placeholder__line_inset-header loads"></div></div> <div class="tm-placeholder-inset__body"><ul class="tm-placeholder-list"><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li></ul></div> <div class="tm-placeholder-inset__footer"><div class="tm-placeholder__line tm-placeholder__line_inset-footer loads"></div></div></div> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --></div> <!-- --> </div></div></div></div></div> <div class="tm-page__sidebar"><!-- --></div></div></div></div></main> <!-- --></div> <!-- --> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><div class="tm-footer__title"><a class="tm-svg-icon__wrapper tm-footer__title-link" href="/ru/"><svg class="tm-svg-img tm-svg-icon" height="16" width="16"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a></div> <div class="tm-footer__social"><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="36" width="36"><title>Facebook</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="36" width="36"><title>Twitter</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="36" width="36"><title>VK</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-vk"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="36" width="36"><title>Telegram</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="36" width="36"><title>Youtube</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://dzen.ru/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="36" width="36"><title>Яндекс Дзен</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-dzen"></use></svg></a></div> <div class="v-portal" style="display:none;"></div> <button class="tm-footer__link"><svg class="tm-svg-img tm-footer__icon" height="16" width="16"><title>Язык</title> <use xlink:href="/img/megazord-v28.faec9762..svg#lang"></use></svg>
        Настройка языка
      </button> <a class="tm-footer__link" href="/ru/feedback/">
        Техническая поддержка
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2024, </span> <span class="tm-copyright__name"><a class="tm-copyright__link" href="https://company.habr.com/" rel="noopener" target="_blank">Habr</a></span></span></div></div></div></div> <!-- --></div> <div class="vue-portal-target"></div></div>





<noscript>
<div>
<img alt="" src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;">
</img></div>
</noscript>


</body>
</html>
